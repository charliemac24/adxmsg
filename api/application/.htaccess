# /s/.htaccess
<IfModule mod_rewrite.c>
    Options -Indexes -MultiViews
    RewriteEngine On
    RewriteBase /s/

    # Safety: ensure /s/ also enforces HTTPS (in case root rules are bypassed)
    RewriteCond %{HTTPS} !=on [OR]
    RewriteCond %{HTTP:X-Forwarded-Proto} !https
    RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
    
    # Serve existing files and directories directly
    RewriteCond %{REQUEST_FILENAME} -f [OR]
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^ - [L]

    # Send everything else to index.php in /s/
    RewriteRule ^ index.php [L]
</IfModule>
